<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Task Manager</title>
    <link rel="stylesheet" href="/css/login.css">
    <script>
        function toggleForms() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('register-container').style.display = 'block';
        }

        function showLogin() {
            document.getElementById('login-container').style.display = 'block';
            document.getElementById('register-container').style.display = 'none';
        }
    </script>
</head>
<body>
    <div class="split left">
        <h1 class="title-3d">TASK MANAGER</h1>
    </div>

    <div class="split right">
        <div id="login-container" class="container">
            <h1>Iniciar Sesi&#243;n</h1>

            {{#error}}
                <p class="error">{{error}}</p>
            {{/error}}

            <form id="formLogin" class="login-form">
                <input type="hidden" name="loginChallenge" value="{{loginChallenge}}">

                <label for="email">Correo Electr&#243;nico:</label>
                <input type="text" id="email" name="username" required>

                <label for="password">Contrase&#241;a:</label>
                <input type="password" id="password" name="password" required>

                <button type="submit">Ingresar</button>
            </form>

            <p class="register-link">¿No tienes una cuenta? <a href="#" onclick="toggleForms()">Reg&#237;strate aqu&#237;</a></p>
        </div>

        <div id="register-container" class="container" style="display: none;">
            <h1>Registrarse</h1>

            <form id="formNewUser" action="/api/users" method="POST" class="register-form" autocomplete="off">
                <input type="hidden" id="loginChallenge" value="{{loginChallenge}}">

                <label for="new-username">Usuario:</label>
                <input type="text" id="new-username" name="new_username" required autocomplete="off" readonly onfocus="this.removeAttribute('readonly')">

                <label for="new-email">Correo Electr&#243;nico:</label>
                <input type="email" id="new-email" name="new_email" required autocomplete="off" readonly onfocus="this.removeAttribute('readonly')">

                <label for="new-password">Contrase&#241;a:</label>
                <input type="password" id="new-password" name="new_password" required autocomplete="new-password" readonly onfocus="this.removeAttribute('readonly')">

                <label for="confirm-password">Confirmar Contrase&#241;a:</label>
                <input type="password" id="confirm-password" name="confirm_password" required autocomplete="new-password" readonly onfocus="this.removeAttribute('readonly')">

                <button type="submit">Registrarse</button>
            </form>

            <p class="register-link">¿Ya tienes una cuenta? <a href="#" onclick="showLogin()">Inicia sesi&#243;n aqu&#237;</a></p>
        </div>
    </div>

    <script src="/js/authHelper.js"></script>
    <script src="/js/actionsUser.js" defer></script>
</body>
</html>
